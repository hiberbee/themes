import org.jetbrains.intellij.tasks.RunPluginVerifierTask

plugins {
  id("java")
  id("org.jetbrains.intellij") version "1.13.3"
  id("com.github.ben-manes.versions") version "0.46.0"
}

group = "com.hiberbee.intellij"
version = System.getenv("APP_VERSION") ?: "2023.3.30.121"

repositories {
  mavenCentral()
}

intellij {
  pluginName ="Hiberbee Theme"
  type = "IC"
  version = "LATEST-EAP-SNAPSHOT"
}

java {
  sourceCompatibility = "17"
  targetCompatibility = "17"
}

buildSearchableOptions {
  enabled = false
}

runPluginVerifier {
  failureLevel = [RunPluginVerifierTask.FailureLevel.COMPATIBILITY_PROBLEMS, RunPluginVerifierTask.FailureLevel.INVALID_PLUGIN]
}

publishPlugin {
  setToken(System.getenv("JETBRAINS_TOKEN"))
}

patchPluginXml {
  changeNotes = """Compatibility fixes related to new UI changes in 2023.1."""
  version = project.version
}
